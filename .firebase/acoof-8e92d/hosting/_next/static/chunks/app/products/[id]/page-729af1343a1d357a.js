(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[403],{8376:(e,s,a)=>{"use strict";a.d(s,{A:()=>t});let t=(0,a(40157).A)("CircleCheckBig",[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]])},21329:(e,s,a)=>{"use strict";a.d(s,{WishlistProvider:()=>o,n:()=>n});var t=a(95155),r=a(12115),i=a(87481);let l=(0,r.createContext)(void 0),o=e=>{let{children:s}=e,{toast:a}=(0,i.dj)(),[o,n]=(0,r.useState)([]),[c,d]=(0,r.useState)(!0);(0,r.useEffect)(()=>{try{let e=localStorage.getItem("acoof-wishlist");e&&n(JSON.parse(e))}catch(e){console.error("Failed to parse wishlist from localStorage",e),localStorage.removeItem("acoof-wishlist")}finally{d(!1)}},[]),(0,r.useEffect)(()=>{c||localStorage.setItem("acoof-wishlist",JSON.stringify(o))},[o,c]);let u=(0,r.useCallback)(e=>{o.some(s=>s.id===e.id)||(n(s=>[...s,e]),a({title:"Added to Wishlist",description:"".concat(e.name," has been added to your wishlist.")}))},[o,a]),p=(0,r.useCallback)(e=>{let s=o.find(s=>s.id===e);n(s=>s.filter(s=>s.id!==e)),s&&a({title:"Removed from Wishlist",description:"".concat(s.name," has been removed from your wishlist.")})},[o,a]),m=(0,r.useCallback)(e=>o.some(s=>s.id===e),[o]);return(0,t.jsx)(l.Provider,{value:{wishlist:o,addToWishlist:u,removeFromWishlist:p,isInWishlist:m,loading:c},children:s})},n=()=>{let e=(0,r.useContext)(l);if(void 0===e)throw Error("useWishlist must be used within a WishlistProvider");return e}},22346:(e,s,a)=>{"use strict";a.d(s,{w:()=>o});var t=a(95155),r=a(12115),i=a(87489),l=a(59434);let o=r.forwardRef((e,s)=>{let{className:a,orientation:r="horizontal",decorative:o=!0,...n}=e;return(0,t.jsx)(i.b,{ref:s,decorative:o,orientation:r,className:(0,l.cn)("shrink-0 bg-border","horizontal"===r?"h-[1px] w-full":"h-full w-[1px]",a),...n})});o.displayName=i.b.displayName},24295:(e,s,a)=>{"use strict";a.d(s,{A:()=>f});var t=a(95155),r=a(66766),i=a(6874),l=a.n(i),o=a(66695),n=a(26126),c=a(30285),d=a(68098),u=a(94815),p=a(21329),m=a(89342),h=a(59434);let f=a(12115).memo(e=>{let{product:s}=e,{addToWishlist:a,removeFromWishlist:i,isInWishlist:f}=(0,p.n)(),{addToCart:x}=(0,m._)(),g=f(s.id);return(0,t.jsxs)(o.Zp,{className:"group/card overflow-hidden transition-shadow duration-300 hover:shadow-lg h-full flex flex-col",children:[(0,t.jsx)(o.aR,{className:"p-0",children:(0,t.jsxs)(l(),{href:"/products/".concat(s.id),className:"block relative group",children:[(0,t.jsx)("div",{className:"aspect-[4/5] w-full overflow-hidden relative bg-secondary",children:(0,t.jsx)(r.default,{src:s.images[0]||"https://placehold.co/600x800.png",alt:s.name,fill:!0,className:"object-cover transition-transform duration-300 group-hover:scale-105",sizes:"(max-width: 768px) 50vw, (max-width: 1024px) 33vw, 25vw"})}),s.isNew&&(0,t.jsx)(n.E,{className:"absolute left-3 top-3",children:"NEW"}),(0,t.jsx)(c.$,{variant:"secondary",size:"icon",className:"absolute right-3 top-3 h-9 w-9 rounded-full bg-background/60 backdrop-blur-sm text-foreground opacity-100 md:opacity-0 group-hover:opacity-100 transition-opacity hover:bg-background",onClick:e=>{e.preventDefault(),e.stopPropagation(),g?i(s.id):a(s)},"aria-label":g?"Remove from wishlist":"Add to wishlist",children:(0,t.jsx)(d.A,{className:(0,h.cn)("h-5 w-5",g&&"fill-primary text-primary")})})]})}),(0,t.jsxs)(o.Wu,{className:"p-4 flex-grow",children:[(0,t.jsx)(n.E,{variant:"secondary",className:"mb-2",children:s.category}),(0,t.jsx)(o.ZB,{className:"text-lg font-bold leading-tight",children:(0,t.jsx)(l(),{href:"/products/".concat(s.id),className:"hover:underline",children:s.name})})]}),(0,t.jsxs)(o.wL,{className:"p-4 flex justify-between items-center",children:[(0,t.jsxs)("p",{className:"text-xl font-semibold text-primary",children:["₹",s.price.toFixed(2)]}),(0,t.jsxs)(c.$,{onClick:e=>{e.preventDefault(),e.stopPropagation(),x(s)},size:"sm",className:"opacity-100 md:opacity-0 group-hover/card:opacity-100 transition-opacity focus:opacity-100",children:[(0,t.jsx)(u.A,{className:"mr-2 h-4 w-4"}),"Add"]})]})]})})},26126:(e,s,a)=>{"use strict";a.d(s,{E:()=>o});var t=a(95155);a(12115);var r=a(74466),i=a(59434);let l=(0,r.F)("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function o(e){let{className:s,variant:a,...r}=e;return(0,t.jsx)("div",{className:(0,i.cn)(l({variant:a}),s),...r})}},30356:(e,s,a)=>{"use strict";a.d(s,{C:()=>c,z:()=>n});var t=a(95155),r=a(12115),i=a(54059),l=a(70154),o=a(59434);let n=r.forwardRef((e,s)=>{let{className:a,...r}=e;return(0,t.jsx)(i.bL,{className:(0,o.cn)("grid gap-2",a),...r,ref:s})});n.displayName=i.bL.displayName;let c=r.forwardRef((e,s)=>{let{className:a,...r}=e;return(0,t.jsx)(i.q7,{ref:s,className:(0,o.cn)("aspect-square h-4 w-4 rounded-full border border-primary text-primary ring-offset-background focus:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",a),...r,children:(0,t.jsx)(i.C1,{className:"flex items-center justify-center",children:(0,t.jsx)(l.A,{className:"h-2.5 w-2.5 fill-current text-current"})})})});c.displayName=i.q7.displayName},54165:(e,s,a)=>{"use strict";a.d(s,{Cf:()=>p,Es:()=>h,L3:()=>f,c7:()=>m,lG:()=>n,rr:()=>x,zM:()=>c});var t=a(95155),r=a(12115),i=a(45821),l=a(25318),o=a(59434);let n=i.bL,c=i.l9,d=i.ZL;i.bm;let u=r.forwardRef((e,s)=>{let{className:a,...r}=e;return(0,t.jsx)(i.hJ,{ref:s,className:(0,o.cn)("fixed inset-0 z-50 bg-black/80 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",a),...r})});u.displayName=i.hJ.displayName;let p=r.forwardRef((e,s)=>{let{className:a,children:r,...n}=e;return(0,t.jsxs)(d,{children:[(0,t.jsx)(u,{}),(0,t.jsxs)(i.UC,{ref:s,className:(0,o.cn)("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",a),...n,children:[r,(0,t.jsxs)(i.bm,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground",children:[(0,t.jsx)(l.A,{className:"h-4 w-4"}),(0,t.jsx)("span",{className:"sr-only",children:"Close"})]})]})]})});p.displayName=i.UC.displayName;let m=e=>{let{className:s,...a}=e;return(0,t.jsx)("div",{className:(0,o.cn)("flex flex-col space-y-1.5 text-center sm:text-left",s),...a})};m.displayName="DialogHeader";let h=e=>{let{className:s,...a}=e;return(0,t.jsx)("div",{className:(0,o.cn)("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",s),...a})};h.displayName="DialogFooter";let f=r.forwardRef((e,s)=>{let{className:a,...r}=e;return(0,t.jsx)(i.hE,{ref:s,className:(0,o.cn)("text-lg font-semibold leading-none tracking-tight",a),...r})});f.displayName=i.hE.displayName;let x=r.forwardRef((e,s)=>{let{className:a,...r}=e;return(0,t.jsx)(i.VY,{ref:s,className:(0,o.cn)("text-sm text-muted-foreground",a),...r})});x.displayName=i.VY.displayName},62523:(e,s,a)=>{"use strict";a.d(s,{p:()=>l});var t=a(95155),r=a(12115),i=a(59434);let l=r.forwardRef((e,s)=>{let{className:a,type:r,...l}=e;return(0,t.jsx)("input",{type:r,className:(0,i.cn)("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",a),ref:s,...l})});l.displayName="Input"},62640:(e,s,a)=>{"use strict";a.d(s,{ProductsProvider:()=>d,Q:()=>u});var t=a(95155),r=a(12115),i=a(56104),l=a(81115),o=a(90858),n=a(93473);let c=(0,r.createContext)(void 0),d=e=>{let{children:s}=e,[a,d]=(0,r.useState)([]),[u,p]=(0,r.useState)(!0);(0,r.useEffect)(()=>{if(!i.OO){console.warn("Firebase not configured, using local fallback products."),d(n.ZE),p(!1);return}p(!0);let e=(0,l.KR)(i.OO,"products"),s=(0,l.Zy)(e,e=>{try{if(e.exists()){let s=e.val();if(s&&Object.keys(s).length>0){let e=Object.keys(s).map(e=>{var a;let t=s[e];return t&&"string"==typeof t.name&&"number"==typeof t.price&&Array.isArray(t.images)?{id:e,name:t.name,description:t.description||"",price:t.price,category:t.category||"Tshirts",images:t.images.length>0?t.images:["https://placehold.co/600x800.png"],isNew:null!=(a=t.isNew)&&a,colors:t.colors||[],sizes:t.sizes||[]}:(console.warn("Skipping malformed product with key: ".concat(e),t),null)}).filter(e=>null!==e).reverse();d(e)}else console.log("Firebase 'products' node is empty, loading local fallback data."),d(n.ZE)}else console.log("No products found in Firebase, loading local fallback data."),d(n.ZE)}catch(e){console.error("Error processing products snapshot, using local fallback. Error:",e),d(n.ZE)}finally{p(!1)}},e=>{console.error("Firebase read failed with onValue, using local fallback. Error:",e),d(n.ZE),p(!1)});return()=>{s()}},[]);let m=(0,r.useCallback)(async e=>{if(!i.OO||!i.IG)throw Error("Firebase not configured.");if(a===n.ZE)return void console.warn("Cannot remove product, running on local data.");let s=(0,l.KR)(i.OO,"products/".concat(e.id));await (0,l.TF)(s);let t=e.images.filter(e=>e.includes("firebasestorage.googleapis.com")).map(e=>{try{let s=(0,o.KR)(i.IG,e);return(0,o.XR)(s)}catch(s){return console.error("Error creating ref for image ".concat(e,". It might not be a valid storage URL."),s),Promise.resolve()}});await Promise.all(t)},[a]),h=(0,r.useCallback)(async(e,s)=>{if(!i.OO)throw Error("Firebase not configured.");if(a===n.ZE)return void console.warn("Cannot update product, running on local data.");let t=(0,l.KR)(i.OO,"products/".concat(e));await (0,l.yo)(t,s)},[a]);return(0,t.jsx)(c.Provider,{value:{products:a,loading:u,removeProduct:m,updateProduct:h},children:s})},u=()=>{let e=(0,r.useContext)(c);if(void 0===e)throw Error("useProducts must be used within a ProductsProvider");return e}},63857:(e,s,a)=>{"use strict";a.d(s,{$:()=>r});var t=a(34477);let r=(0,t.createServerReference)("70e640e3504e86d7e2c9ae8ed1ac5e4972be531e55",t.callServer,void 0,t.findSourceMapURL,"createRazorpayOrder")},66695:(e,s,a)=>{"use strict";a.d(s,{BT:()=>c,Wu:()=>d,ZB:()=>n,Zp:()=>l,aR:()=>o,wL:()=>u});var t=a(95155),r=a(12115),i=a(59434);let l=r.forwardRef((e,s)=>{let{className:a,...r}=e;return(0,t.jsx)("div",{ref:s,className:(0,i.cn)("rounded-lg border bg-card text-card-foreground shadow-sm",a),...r})});l.displayName="Card";let o=r.forwardRef((e,s)=>{let{className:a,...r}=e;return(0,t.jsx)("div",{ref:s,className:(0,i.cn)("flex flex-col space-y-1.5 p-6",a),...r})});o.displayName="CardHeader";let n=r.forwardRef((e,s)=>{let{className:a,...r}=e;return(0,t.jsx)("div",{ref:s,className:(0,i.cn)("text-2xl font-semibold leading-none tracking-tight",a),...r})});n.displayName="CardTitle";let c=r.forwardRef((e,s)=>{let{className:a,...r}=e;return(0,t.jsx)("div",{ref:s,className:(0,i.cn)("text-sm text-muted-foreground",a),...r})});c.displayName="CardDescription";let d=r.forwardRef((e,s)=>{let{className:a,...r}=e;return(0,t.jsx)("div",{ref:s,className:(0,i.cn)("p-6 pt-0",a),...r})});d.displayName="CardContent";let u=r.forwardRef((e,s)=>{let{className:a,...r}=e;return(0,t.jsx)("div",{ref:s,className:(0,i.cn)("flex items-center p-6 pt-0",a),...r})});u.displayName="CardFooter"},68098:(e,s,a)=>{"use strict";a.d(s,{A:()=>t});let t=(0,a(40157).A)("Heart",[["path",{d:"M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z",key:"c3ymky"}]])},70294:(e,s,a)=>{Promise.resolve().then(a.bind(a,78505))},72415:(e,s,a)=>{"use strict";a.d(s,{u:()=>r});var t=a(34477);let r=(0,t.createServerReference)("6073576538077b9a5b4ce210a1685eafb441e7ccdb",t.callServer,void 0,t.findSourceMapURL,"saveOrderToDatabase")},77826:(e,s,a)=>{"use strict";a.d(s,{G:()=>r});var t=a(34477);let r=(0,t.createServerReference)("40af7c7ff0fbd35701fe6acec88c51aaef1ed2e3f8",t.callServer,void 0,t.findSourceMapURL,"verifyRazorpayPayment")},78505:(e,s,a)=>{"use strict";a.r(s),a.d(s,{default:()=>I});var t=a(95155),r=a(35695),i=a(66766),l=a(62640),o=a(89342),n=a(21329),c=a(30285),d=a(66695),u=a(91091),p=a(50172),m=a(68098),h=a(40157);let f=(0,h.A)("Star",[["path",{d:"M11.525 2.295a.53.53 0 0 1 .95 0l2.31 4.679a2.123 2.123 0 0 0 1.595 1.16l5.166.756a.53.53 0 0 1 .294.904l-3.736 3.638a2.123 2.123 0 0 0-.611 1.878l.882 5.14a.53.53 0 0 1-.771.56l-4.618-2.428a2.122 2.122 0 0 0-1.973 0L6.396 21.01a.53.53 0 0 1-.77-.56l.881-5.139a2.122 2.122 0 0 0-.611-1.879L2.16 9.795a.53.53 0 0 1 .294-.906l5.165-.755a2.122 2.122 0 0 0 1.597-1.16z",key:"r04s7s"}]]);var x=a(94815);let g=(0,h.A)("Zap",[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",key:"1xq2db"}]]);var y=a(18763),v=a(83662),N=a(8376),w=a(22346),b=a(26126),j=a(59434),k=a(12115),S=a(30356),C=a(85057),z=a(62523),A=a(87481),P=a(98030),E=a(63857),T=a(77826),L=a(72415),R=a(54165),O=a(24295);function I(){let{id:e}=(0,r.useParams)(),s=(0,r.useRouter)(),{products:a,loading:h}=(0,l.Q)(),{addToCart:I}=(0,o._)(),{addToWishlist:_,removeFromWishlist:F,isInWishlist:B}=(0,n.n)(),{toast:M}=(0,A.dj)(),{user:J,loading:W}=(0,P.A)(),[Z,D]=(0,k.useState)(),[G,U]=(0,k.useState)(),[X,$]=(0,k.useState)(!1),[Y,V]=(0,k.useState)(!1),[q,K]=(0,k.useState)(!1),[H,Q]=(0,k.useState)(!1),[ee,es]=(0,k.useState)("default"),[ea,et]=(0,k.useState)({address:"",city:"",state:"",pincode:"",phone:""}),er=(0,k.useMemo)(()=>a.find(s=>s.id===e),[a,e]),ei=(0,k.useMemo)(()=>{if(!er||!a.length)return[];let e={Tshirts:["Jeans","Pants","Shoes","Bags","Belts"],"Oversized T-shirt":["Jeans","Trousers","Shoes","Belts","Track pants"],Shirts:["Trousers","Jeans","Shoes","Belts","Pants"],Sweater:["Jeans","Pants","Shoes","Trousers"],Sweatshirt:["Track pants","Jeans","Shoes","Bags"],Jackets:["Tshirts","Jeans","Pants","Shoes","Sweatshirt"],Jeans:["Tshirts","Shirts","Shoes","Belts","Sweatshirt","Jackets"],Pants:["Tshirts","Shirts","Shoes","Belts","Sweater"],Trousers:["Shirts","Shoes","Belts","Sweater"],"Track pants":["Sweatshirt","Tshirts","Shoes"],Shoes:["Socks","Jeans","Pants","Trousers","Track pants"],Bags:["Tshirts","Wallets","Jackets","Jeans"],Belts:["Jeans","Pants","Trousers"],Socks:["Shoes","Track pants"],Wallets:["Bags","Jeans"]}[er.category]||[];return a.filter(s=>s.id!==er.id&&e.includes(s.category)).sort(()=>.5-Math.random()).slice(0,12)},[er,a]),el=(0,k.useMemo)(()=>ea.address.trim()&&ea.city.trim()&&ea.state.trim()&&ea.pincode.trim()&&ea.phone.trim(),[ea]),eo=(0,k.useMemo)(()=>!!X||!!Y||!!H||!!W||!J||("default"===ee?!(null==J?void 0:J.address)||!(null==J?void 0:J.phone):"new"!==ee||!el),[X,Y,ee,J,W,el,H]),en=e=>{let{id:s,value:a}=e.target;et(e=>({...e,[s]:a}))};if((0,k.useEffect)(()=>{er&&(er.colors&&er.colors.length>0&&!Z&&D(er.colors[0]),er.sizes&&er.sizes.length>0&&!G&&U(er.sizes[0]))},[er,Z,G]),h)return(0,t.jsx)("div",{className:"flex items-center justify-center min-h-[60vh]",children:(0,t.jsx)(p.A,{className:"h-12 w-12 animate-spin text-primary"})});if(!er)return(0,t.jsxs)("div",{className:"container mx-auto py-12 px-4 text-center",children:[(0,t.jsx)("h1",{className:"text-4xl font-bold tracking-tighter",children:"Product Not Found"}),(0,t.jsx)("p",{className:"mt-4 text-muted-foreground",children:"The product you are looking for does not exist."})]});let ec=B(er.id),ed=()=>"new"===ee?el?"".concat(ea.address,", ").concat(ea.city,", ").concat(ea.state," ").concat(ea.pincode,"\nPhone: ").concat(ea.phone):(M({variant:"destructive",title:"Address Incomplete",description:"Please fill all fields for the new shipping address, including phone number."}),null):(null==J?void 0:J.address)&&(null==J?void 0:J.phone)?"".concat(J.address,", ").concat(J.city,", ").concat(J.state," ").concat(J.pincode,"\nPhone: ").concat(J.phone):(M({variant:"destructive",title:"Address or Phone Missing",description:"Please add a shipping address and phone number to your profile before proceeding."}),null),eu=async()=>{if(!er||!J)return;let e=ed();if(!e)return;if(er.price<1)return void M({variant:"destructive",title:"Invalid Amount",description:"This product cannot be purchased as its price is less than ₹1.00."});$(!0);let a=await J.getIdToken(),t=await (0,E.$)(er.price,a,"receipt_product_".concat(er.id));if("error"in t){M({variant:"destructive",title:"Payment Initialization Failed",description:t.error}),$(!1);return}let r={key:"rzp_live_XR2ZuStUe6ydxT",amount:t.amount,currency:t.currency,name:"Acoof",description:"Payment for ".concat(er.name),order_id:t.id,handler:async function(a){let t=await (0,T.G)({orderId:a.razorpay_order_id,paymentId:a.razorpay_payment_id,signature:a.razorpay_signature});if(t.success){let t={productId:er.id,productName:er.name,quantity:1,price:er.price,size:G,color:Z,imageUrl:er.images[0]||""},r={userId:J.uid,user:J.displayName||"Anonymous",userEmail:J.email||"N/A",date:new Date().toISOString().split("T")[0],total:er.price,status:"Pending",shippingAddress:e,items:[t],paymentMethod:"Razorpay",orderId:a.razorpay_order_id,paymentId:a.razorpay_payment_id,paymentSignature:a.razorpay_signature},i=await (0,L.u)(r,await J.getIdToken());i.success?(M({title:"Payment Successful",description:"Your order has been placed!"}),K(!1),s.push("/dashboard/user/orders")):M({variant:"destructive",title:"Order Error",description:i.error})}else M({variant:"destructive",title:"Payment Failed",description:t.error||"Unknown error during verification."});$(!1)},prefill:{name:J.displayName||"",email:J.email||"",contact:J.phone||""},theme:{color:"#FF9800"},modal:{ondismiss:function(){$(!1),M({variant:"destructive",title:"Payment Cancelled",description:"The payment process was not completed."})}}};new window.Razorpay(r).open()},ep=async()=>{if(!er||!J)return;let e=ed();if(!e)return;V(!0);let a={productId:er.id,productName:er.name,quantity:1,price:er.price,size:G,color:Z,imageUrl:er.images[0]||""},t={userId:J.uid,user:J.displayName||"Anonymous",userEmail:J.email||"N/A",date:new Date().toISOString().split("T")[0],total:er.price,status:"Pending",shippingAddress:e,items:[a],paymentMethod:"COD"},r=await (0,L.u)(t,await J.getIdToken());r.success?(M({title:"Order Placed!",description:"Your order for has been placed. You will pay upon delivery."}),K(!1),s.push("/dashboard/user/orders")):M({variant:"destructive",title:"Order Error",description:r.error}),V(!1)};return(0,t.jsxs)("div",{className:"container mx-auto py-12 px-4",children:[(0,t.jsxs)("div",{className:"grid md:grid-cols-2 gap-8 md:gap-12 items-start",children:[(0,t.jsx)("div",{children:(0,t.jsxs)(u.FN,{className:"w-full group",children:[(0,t.jsx)(u.Wk,{children:er.images.map((e,s)=>(0,t.jsx)(u.A7,{children:(0,t.jsx)(d.Zp,{className:"overflow-hidden rounded-lg",children:(0,t.jsx)(d.Wu,{className:"p-0 aspect-[4/5] relative",children:(0,t.jsx)(i.default,{src:e,alt:"".concat(er.name," image ").concat(s+1),fill:!0,className:"object-cover",sizes:"(max-width: 768px) 100vw, 50vw"})})})},s))}),er.images.length>1&&(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(u.Q8,{className:"absolute left-4 opacity-0 group-hover:opacity-100 transition-opacity"}),(0,t.jsx)(u.Oj,{className:"absolute right-4 opacity-0 group-hover:opacity-100 transition-opacity"})]})]})}),(0,t.jsxs)("div",{className:"space-y-4 md:space-y-6",children:[(0,t.jsxs)("div",{children:[(0,t.jsxs)("div",{className:"flex justify-between items-start",children:[(0,t.jsxs)("div",{className:"flex-1",children:[(0,t.jsx)(b.E,{variant:"secondary",children:er.category}),(0,t.jsx)("h1",{className:"text-3xl md:text-4xl font-bold tracking-tighter mt-2 font-headline",children:er.name})]}),(0,t.jsx)(c.$,{size:"icon",variant:"ghost",className:"rounded-full flex-shrink-0 ml-4",onClick:()=>{ec?F(er.id):_(er)},"aria-label":ec?"Remove from Wishlist":"Add to Wishlist",children:(0,t.jsx)(m.A,{className:(0,j.cn)("h-6 w-6",ec&&"fill-primary text-primary")})})]}),(0,t.jsxs)("p",{className:"text-2xl md:text-3xl font-semibold text-primary mt-4",children:["₹",er.price.toFixed(2)]}),(0,t.jsxs)("div",{className:"flex items-center gap-2 mt-2 text-sm text-muted-foreground",children:[(0,t.jsxs)("div",{className:"flex items-center gap-0.5",children:[(0,t.jsx)(f,{className:"h-4 w-4 fill-yellow-400 text-yellow-400"}),(0,t.jsx)(f,{className:"h-4 w-4 fill-yellow-400 text-yellow-400"}),(0,t.jsx)(f,{className:"h-4 w-4 fill-yellow-400 text-yellow-400"}),(0,t.jsx)(f,{className:"h-4 w-4 fill-yellow-400 text-yellow-400"}),(0,t.jsx)(f,{className:"h-4 w-4 text-muted-foreground"})]}),(0,t.jsx)("span",{children:"(123 Reviews)"})]})]}),(0,t.jsx)(w.w,{}),(0,t.jsx)("p",{className:"text-muted-foreground leading-relaxed",children:er.description}),er.colors&&er.colors.length>0&&(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsxs)("h3",{className:"font-semibold",children:["Color: ",(0,t.jsx)("span",{className:"font-normal text-muted-foreground",children:Z})]}),(0,t.jsx)(S.z,{value:Z,onValueChange:D,className:"flex flex-wrap gap-2",children:er.colors.map(e=>(0,t.jsxs)(C.J,{htmlFor:"color-".concat(e),className:(0,j.cn)("cursor-pointer rounded-md border-2 px-4 py-2 text-sm transition-colors",Z===e?"border-primary text-primary bg-primary/10":"border-input hover:border-primary/50"),children:[(0,t.jsx)(S.C,{value:e,id:"color-".concat(e),className:"sr-only"}),e]},e))})]}),er.sizes&&er.sizes.length>0&&(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsxs)("h3",{className:"font-semibold",children:["Size: ",(0,t.jsx)("span",{className:"font-normal text-muted-foreground",children:G})]}),(0,t.jsx)(S.z,{value:G,onValueChange:U,className:"flex flex-wrap gap-2",children:er.sizes.map(e=>(0,t.jsxs)(C.J,{htmlFor:"size-".concat(e),className:(0,j.cn)("cursor-pointer rounded-md border-2 px-4 py-2 text-sm transition-colors",G===e?"border-primary text-primary bg-primary/10":"border-input hover:border-primary/50"),children:[(0,t.jsx)(S.C,{value:e,id:"size-".concat(e),className:"sr-only"}),e]},e))})]}),(0,t.jsxs)("div",{className:"flex flex-col sm:flex-row gap-4 pt-4",children:[(0,t.jsxs)(c.$,{size:"lg",variant:"outline",className:"w-full",onClick:()=>{er&&I(er,1,G,Z)},disabled:X||Y,children:[(0,t.jsx)(x.A,{className:"mr-2 h-5 w-5"}),"Add to Cart"]}),(0,t.jsxs)(R.lG,{open:q,onOpenChange:K,children:[(0,t.jsx)(R.zM,{asChild:!0,children:(0,t.jsxs)(c.$,{size:"lg",className:"w-full",onClick:()=>{if(!J){M({variant:"destructive",title:"Not Logged In",description:"Please log in to buy this item."}),s.push("/login");return}K(!0)},disabled:X||Y,children:[(0,t.jsx)(g,{className:"mr-2 h-5 w-5"}),"Buy Now"]})}),(0,t.jsxs)(R.Cf,{children:[(0,t.jsxs)(R.c7,{children:[(0,t.jsx)(R.L3,{children:"Confirm Purchase"}),(0,t.jsxs)(R.rr,{children:['Confirm your shipping details for "',er.name,'".']})]}),(0,t.jsxs)("div",{className:"space-y-4 py-4",children:[(0,t.jsxs)(S.z,{value:ee,onValueChange:e=>es(e),className:"space-y-2",children:[(0,t.jsxs)("div",{className:"p-4 border rounded-lg space-y-2 has-[:checked]:bg-secondary/50 has-[:checked]:border-primary",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)(C.J,{htmlFor:"default-address",className:"font-semibold flex items-center gap-2 cursor-pointer",children:[(0,t.jsx)(S.C,{value:"default",id:"default-address"}),"Use Default Address"]}),(0,t.jsxs)(c.$,{variant:"outline",size:"sm",onClick:()=>s.push("/dashboard/user"),children:[(0,t.jsx)(y.A,{className:"mr-2 h-4 w-4"}),"Change"]})]}),(null==J?void 0:J.address)&&(null==J?void 0:J.phone)?(0,t.jsxs)("address",{className:"text-sm text-muted-foreground not-italic pl-6 whitespace-pre-wrap",children:[(0,t.jsx)("p",{className:"font-medium text-foreground",children:J.displayName}),(0,t.jsxs)("p",{children:[J.address,", ",J.city,", ",J.state," ",J.pincode]}),(0,t.jsxs)("p",{children:["Phone: ",J.phone]})]}):(0,t.jsx)("div",{className:"text-sm text-destructive pl-6",children:"No default address and/or phone number found. Please add them in your profile."})]}),(0,t.jsxs)("div",{className:"p-4 border rounded-lg space-y-2 has-[:checked]:bg-secondary/50 has-[:checked]:border-primary",children:[(0,t.jsxs)(C.J,{htmlFor:"new-address",className:"font-semibold flex items-center gap-2 cursor-pointer",children:[(0,t.jsx)(S.C,{value:"new",id:"new-address"}),"Ship to a New Address"]}),"new"===ee&&(0,t.jsxs)("div",{className:"space-y-2 pl-6 pt-2",children:[(0,t.jsx)(z.p,{id:"address",placeholder:"Street Address",value:ea.address,onChange:en}),(0,t.jsxs)("div",{className:"grid grid-cols-2 gap-2",children:[(0,t.jsx)(z.p,{id:"city",placeholder:"City",value:ea.city,onChange:en}),(0,t.jsx)(z.p,{id:"state",placeholder:"State",value:ea.state,onChange:en})]}),(0,t.jsxs)("div",{className:"grid grid-cols-2 gap-2",children:[(0,t.jsx)(z.p,{id:"pincode",placeholder:"Pincode",value:ea.pincode,onChange:en}),(0,t.jsx)(z.p,{id:"phone",placeholder:"Phone Number",value:ea.phone,onChange:en})]}),(0,t.jsx)("div",{className:"flex justify-end pt-1",children:(0,t.jsx)(c.$,{variant:"link",size:"sm",onClick:()=>{let e="AIzaSyC3lFev4khzeaFLcZ_VwWnjBrMnbPJf31g";return e?navigator.geolocation?void(Q(!0),M({title:"Fetching Location",description:"Please grant permission to access your location."}),navigator.geolocation.getCurrentPosition(async s=>{let{latitude:a,longitude:t}=s.coords;try{let s=await fetch("https://maps.googleapis.com/maps/api/geocode/json?latlng=".concat(a,",").concat(t,"&key=").concat(e)),r=await s.json();if("OK"===r.status&&r.results[0]){let e=r.results[0].formatted_address,s=r.results[0].address_components,a=e=>{var a;return(null==(a=s.find(s=>s.types.includes(e)))?void 0:a.long_name)||""};et(s=>({...s,address:e,city:a("locality"),state:a("administrative_area_level_1"),pincode:a("postal_code")})),M({title:"Location Updated",description:"Your address has been populated."})}else{let e="Geocoding failed: ".concat(r.status);r.error_message&&(e='Geocoding API error: "'.concat(r.error_message,'". Please check your API key and Google Cloud project settings.')),M({variant:"destructive",title:"Could Not Fetch Address",description:e})}}catch(e){M({variant:"destructive",title:"Network Error",description:"Could not connect to the Geocoding service."})}finally{Q(!1)}},e=>{let s="An unknown error occurred.";switch(e.code){case e.PERMISSION_DENIED:s="You denied the request for Geolocation.";break;case e.POSITION_UNAVAILABLE:s="Location information is unavailable.";break;case e.TIMEOUT:s="The request to get user location timed out."}M({variant:"destructive",title:"Geolocation Error",description:s}),Q(!1)})):void M({variant:"destructive",title:"Geolocation Not Supported",description:"Your browser does not support this feature."}):void M({variant:"destructive",title:"Configuration Error",description:"The Google Maps API key is missing. Please add NEXT_PUBLIC_GOOGLE_MAPS_API_KEY to your .env file."})},type:"button",className:"p-0 h-auto text-sm text-primary",disabled:H,children:H?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(p.A,{className:"mr-2 h-4 w-4 animate-spin"}),"Fetching..."]}):(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(v.A,{className:"mr-2 h-4 w-4"}),"Use current location"]})})})]})]})]}),(0,t.jsxs)("div",{className:"flex justify-between items-center p-4 border rounded-lg",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"font-semibold",children:"Total Amount"}),(0,t.jsxs)("p",{className:"text-2xl text-primary font-bold",children:["₹",er.price.toFixed(2)]})]}),(0,t.jsx)("div",{className:"relative h-16 w-16",children:(0,t.jsx)(i.default,{src:er.images[0],alt:er.name,fill:!0,className:"rounded-md object-cover"})})]})]}),(0,t.jsxs)(R.Es,{className:"sm:justify-between gap-2",children:[(0,t.jsxs)(c.$,{className:"w-full sm:w-auto",onClick:eu,disabled:eo,children:[X?(0,t.jsx)(p.A,{className:"mr-2 h-4 w-4 animate-spin"}):null,X?"Processing...":"Pay Online"]}),(0,t.jsxs)(c.$,{variant:"secondary",className:"w-full sm:w-auto",onClick:ep,disabled:eo,children:[Y?(0,t.jsx)(p.A,{className:"mr-2 h-4 w-4 animate-spin"}):null,Y?"Placing Order...":"Cash on Delivery"]})]})]})]})]}),(0,t.jsxs)("div",{className:"flex items-center gap-2 text-sm text-muted-foreground",children:[(0,t.jsx)(N.A,{className:"h-5 w-5 text-green-500"}),(0,t.jsx)("span",{children:"In Stock - Ships within 2-3 business days."})]})]})]}),ei.length>0&&(0,t.jsxs)("div",{className:"mt-20 md:mt-28",children:[(0,t.jsx)("h2",{className:"text-3xl font-bold tracking-tighter font-headline mb-8",children:"You Might Also Like"}),(0,t.jsxs)(u.FN,{opts:{align:"start",loop:ei.length>4},className:"w-full",children:[(0,t.jsx)(u.Wk,{children:ei.map(e=>(0,t.jsx)(u.A7,{className:"md:basis-1/2 lg:basis-1/3 xl:basis-1/4",children:(0,t.jsx)("div",{className:"p-1",children:(0,t.jsx)(O.A,{product:e})})},e.id))}),(0,t.jsx)(u.Q8,{className:"hidden sm:flex"}),(0,t.jsx)(u.Oj,{className:"hidden sm:flex"})]})]})]})}},85057:(e,s,a)=>{"use strict";a.d(s,{J:()=>c});var t=a(95155),r=a(12115),i=a(40968),l=a(74466),o=a(59434);let n=(0,l.F)("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),c=r.forwardRef((e,s)=>{let{className:a,...r}=e;return(0,t.jsx)(i.b,{ref:s,className:(0,o.cn)(n(),a),...r})});c.displayName=i.b.displayName},91091:(e,s,a)=>{"use strict";a.d(s,{A7:()=>h,FN:()=>p,Oj:()=>x,Q8:()=>f,Wk:()=>m});var t=a(95155),r=a(12115),i=a(85005),l=a(12543),o=a(19968),n=a(59434),c=a(30285);let d=r.createContext(null);function u(){let e=r.useContext(d);if(!e)throw Error("useCarousel must be used within a <Carousel />");return e}let p=r.forwardRef((e,s)=>{let{orientation:a="horizontal",opts:l,setApi:o,plugins:c,className:u,children:p,...m}=e,[h,f]=(0,i.A)({...l,axis:"horizontal"===a?"x":"y"},c),[x,g]=r.useState(!1),[y,v]=r.useState(!1),N=r.useCallback(e=>{e&&(g(e.canScrollPrev()),v(e.canScrollNext()))},[]),w=r.useCallback(()=>{null==f||f.scrollPrev()},[f]),b=r.useCallback(()=>{null==f||f.scrollNext()},[f]),j=r.useCallback(e=>{"ArrowLeft"===e.key?(e.preventDefault(),w()):"ArrowRight"===e.key&&(e.preventDefault(),b())},[w,b]);return r.useEffect(()=>{f&&o&&o(f)},[f,o]),r.useEffect(()=>{if(f)return N(f),f.on("reInit",N),f.on("select",N),()=>{null==f||f.off("select",N)}},[f,N]),(0,t.jsx)(d.Provider,{value:{carouselRef:h,api:f,opts:l,orientation:a||((null==l?void 0:l.axis)==="y"?"vertical":"horizontal"),scrollPrev:w,scrollNext:b,canScrollPrev:x,canScrollNext:y},children:(0,t.jsx)("div",{ref:s,onKeyDownCapture:j,className:(0,n.cn)("relative",u),role:"region","aria-roledescription":"carousel",...m,children:p})})});p.displayName="Carousel";let m=r.forwardRef((e,s)=>{let{className:a,...r}=e,{carouselRef:i,orientation:l}=u();return(0,t.jsx)("div",{ref:i,className:"overflow-hidden",children:(0,t.jsx)("div",{ref:s,className:(0,n.cn)("flex","horizontal"===l?"-ml-4":"-mt-4 flex-col",a),...r})})});m.displayName="CarouselContent";let h=r.forwardRef((e,s)=>{let{className:a,...r}=e,{orientation:i}=u();return(0,t.jsx)("div",{ref:s,role:"group","aria-roledescription":"slide",className:(0,n.cn)("min-w-0 shrink-0 grow-0 basis-full","horizontal"===i?"pl-4":"pt-4",a),...r})});h.displayName="CarouselItem";let f=r.forwardRef((e,s)=>{let{className:a,variant:r="outline",size:i="icon",...o}=e,{orientation:d,scrollPrev:p,canScrollPrev:m}=u();return(0,t.jsxs)(c.$,{ref:s,variant:r,size:i,className:(0,n.cn)("absolute  h-8 w-8 rounded-full","horizontal"===d?"-left-12 top-1/2 -translate-y-1/2":"-top-12 left-1/2 -translate-x-1/2 rotate-90",a),disabled:!m,onClick:p,...o,children:[(0,t.jsx)(l.A,{className:"h-4 w-4"}),(0,t.jsx)("span",{className:"sr-only",children:"Previous slide"})]})});f.displayName="CarouselPrevious";let x=r.forwardRef((e,s)=>{let{className:a,variant:r="outline",size:i="icon",...l}=e,{orientation:d,scrollNext:p,canScrollNext:m}=u();return(0,t.jsxs)(c.$,{ref:s,variant:r,size:i,className:(0,n.cn)("absolute h-8 w-8 rounded-full","horizontal"===d?"-right-12 top-1/2 -translate-y-1/2":"-bottom-12 left-1/2 -translate-x-1/2 rotate-90",a),disabled:!m,onClick:p,...l,children:[(0,t.jsx)(o.A,{className:"h-4 w-4"}),(0,t.jsx)("span",{className:"sr-only",children:"Next slide"})]})});x.displayName="CarouselNext"},93473:(e,s,a)=>{"use strict";a.d(s,{BX:()=>i,LZ:()=>r,ZE:()=>t,ap:()=>l});let t=[{id:"1",name:"Classic White Tee",description:"A timeless staple for any wardrobe, made from 100% premium cotton.",price:25,category:"Tshirts",images:["https://placehold.co/600x800.png"],isNew:!0,colors:["White","Black","Gray"],sizes:["S","M","L","XL","XXL"]},{id:"2",name:"Slim-Fit Denim Jeans",description:"Modern slim-fit jeans in a versatile dark wash.",price:75,category:"Jeans",images:["https://placehold.co/600x800.png"],isNew:!0,colors:["Dark Wash","Light Wash","Black"],sizes:["30","32","34","36"]},{id:"3",name:"Leather Derby Shoes",description:"Classic derby shoes crafted from genuine leather, perfect for any occasion.",price:120,category:"Shoes",images:["https://placehold.co/600x800.png"],isNew:!0,colors:["Black","Brown"],sizes:["9","10","11","12"]},{id:"4",name:"Urban Graphic Hoodie",description:"Comfortable cotton hoodie with a bold back print.",price:65,category:"Shirts",images:["https://placehold.co/600x800.png"],isNew:!1,colors:["Black","Heather Gray","Navy"],sizes:["S","M","L","XL","XXL"]},{id:"5",name:"Cargo Trousers",description:"Utilitarian cargo pants with multiple pockets for functionality.",price:80,category:"Trousers",images:["https://placehold.co/600x800.png"],isNew:!1,colors:["Khaki","Olive","Black"],sizes:["S","M","L","XL","XXL"]},{id:"6",name:"Minimalist Sneakers",description:"Clean and simple sneakers that pair with everything.",price:90,category:"Shoes",images:["https://placehold.co/600x800.png"],isNew:!1,colors:["White","Black","Cream"],sizes:["8","9","10","11","12","13"]},{id:"7",name:"Linen Button-Up Shirt",description:"A breezy linen shirt, ideal for warmer weather.",price:55,category:"Shirts",images:["https://placehold.co/600x800.png"],isNew:!1,colors:["Beige","White","Light Blue"],sizes:["S","M","L","XL","XXL"]},{id:"8",name:"Canvas Tote Bag",description:"A durable and stylish canvas tote for your daily essentials.",price:40,category:"Bags",images:["https://placehold.co/600x600.png"],isNew:!0,colors:["Natural","Black"],sizes:["One Size"]}],r=["Shirts","Tshirts","Oversized T-shirt","Pants","Jeans","Trousers","Shoes","Bags","Belts","Socks","Wallets","Sweater","Sweatshirt","Jackets","Track pants"],i=["S","M","L","XL","XXL"],l=["28","30","32","34","36"]},94815:(e,s,a)=>{"use strict";a.d(s,{A:()=>t});let t=(0,a(40157).A)("ShoppingCart",[["circle",{cx:"8",cy:"21",r:"1",key:"jimo8o"}],["circle",{cx:"19",cy:"21",r:"1",key:"13723u"}],["path",{d:"M2.05 2.05h2l2.66 12.42a2 2 0 0 0 2 1.58h9.78a2 2 0 0 0 1.95-1.57l1.65-7.43H5.12",key:"9zh506"}]])}},e=>{e.O(0,[507,644,889,277,506,821,874,458,428,866,441,964,358],()=>e(e.s=70294)),_N_E=e.O()}]);