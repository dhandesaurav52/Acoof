(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[970],{9439:(e,a,r)=>{Promise.resolve().then(r.bind(r,22220))},22220:(e,a,r)=>{"use strict";r.r(a),r.d(a,{default:()=>c});var t=r(95155),i=r(35695),s=r(98030),o=r(50172),l=r(12115);let n="admin@example.com";function c(e){let{children:a}=e,{user:r,loading:c}=(0,s.A)(),d=(0,i.useRouter)();return((0,l.useEffect)(()=>{c||(r?r.email!==n&&d.replace("/dashboard/user"):d.replace("/login"))},[r,c,d]),c||!r||r.email!==n)?(0,t.jsx)("div",{className:"flex items-center justify-center min-h-screen bg-background",children:(0,t.jsx)(o.A,{className:"h-8 w-8 animate-spin text-primary"})}):(0,t.jsx)(t.Fragment,{children:a})}},50172:(e,a,r)=>{"use strict";r.d(a,{A:()=>t});let t=(0,r(40157).A)("LoaderCircle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]])},56104:(e,a,r)=>{"use strict";let t;r.d(a,{IG:()=>p,OO:()=>m,j2:()=>h});var i=r(23915),s=r(93004),o=r(90858),l=r(81115),n=r(49509);let c={apiKey:"AIzaSyCTdO0dfAN6jOW1tj-AQM4vSP7o6LVkdUg",authDomain:"acoof-8e92d.firebaseapp.com",projectId:"acoof-8e92d",storageBucket:"acoof-8e92d.firebasestorage.app",messagingSenderId:"791754268594",appId:"1:791754268594:web:51afb7e216efd2c44b8eab",databaseURL:"https://acoof-8e92d-default-rtdb.firebaseio.com"},d=n.env.FIREBASE_CONFIG?JSON.parse(n.env.FIREBASE_CONFIG):null;t=c.apiKey?c:d;let u=null,h=null,p=null,m=null;if(t&&t.apiKey)try{u=(0,i.Dk)().length?(0,i.Sx)():(0,i.Wp)(t),h=(0,s.xI)(u),p=(0,o.c7)(u),m=(0,l.C3)(u)}catch(e){console.error("Failed to initialize Firebase client SDK.",e)}else console.warn("Firebase configuration is missing or incomplete. Firebase client-side features will be disabled. If you are running locally, please create a .env.local file with your Firebase project's NEXT_PUBLIC_ credentials.")},98030:(e,a,r)=>{"use strict";r.d(a,{A:()=>h,AuthProvider:()=>u});var t=r(95155),i=r(12115),s=r(93004),o=r(56104),l=r(35695),n=r(81115);let c=(0,i.createContext)(void 0),d=Error("Firebase is not configured. Please add your Firebase credentials to the .env file."),u=e=>{let{children:a}=e,[r,u]=(0,i.useState)(null),[h,p]=(0,i.useState)(!0),m=(0,l.useRouter)();(0,i.useEffect)(()=>{if(!o.j2)return void p(!1);let e=(0,s.hg)(o.j2,async e=>{if(e){if(!o.OO){u(e),p(!1);return}let a=(0,n.KR)(o.OO,"users/".concat(e.uid));try{let r=await (0,n.Jt)(a);if(r.exists()){let a=r.val();Object.assign(e,a)}else{let r={email:e.email,displayName:e.displayName};await (0,n.hZ)(a,r),Object.assign(e,r)}u(e)}catch(a){u(e)}}else u(null);p(!1)});return()=>e()},[]);let f=async(e,a)=>{if(!o.j2)throw d;return(0,s.x9)(o.j2,e,a)},y=async(e,a,r,t)=>{if(!o.j2||!o.OO)throw d;try{let i=await (0,s.eJ)(o.j2,e,a);if(i.user)try{let e="".concat(r," ").concat(t);await (0,s.r7)(i.user,{displayName:e});let a=(0,n.KR)(o.OO,"users/".concat(i.user.uid));await (0,n.hZ)(a,{email:i.user.email,displayName:e})}catch(e){console.error("Database error during sign up:",e)}return i}catch(e){throw e}},g=async e=>{let a=null===o.j2||void 0===o.j2?void 0:o.j2.currentUser;if(!o.j2||!a||!o.OO)throw Error("Firebase not configured or user not logged in.");try{let r=[];e.displayName&&e.displayName!==a.displayName&&r.push((0,s.r7)(a,{displayName:e.displayName})),e.email&&e.email!==a.email&&r.push((0,s.Ww)(a,e.email)),r.length>0&&await Promise.all(r);let t=(0,n.KR)(o.OO,"users/".concat(a.uid)),i={};e.displayName&&(i.displayName=e.displayName),e.email&&(i.email=e.email),void 0!==e.phone&&(i.phone=e.phone),void 0!==e.address&&(i.address=e.address),void 0!==e.city&&(i.city=e.city),void 0!==e.state&&(i.state=e.state),void 0!==e.pincode&&(i.pincode=e.pincode),Object.keys(i).length>0&&await (0,n.yo)(t,i),await a.reload();let l=o.j2.currentUser;if(l){let e=await (0,n.Jt)(t),a=e.exists()?e.val():{};Object.assign(l,a),u(l)}else u(null)}catch(e){var r;if("PERMISSION_DENIED"===e.code||(null==(r=e.message)?void 0:r.includes("permission_denied")))throw Error("Permission Denied: Please check your Firebase Realtime Database security rules to allow users to read/write their own profile data.");if("auth/requires-recent-login"===e.code)throw Error("This action is sensitive and requires recent authentication. Please log out and log back in to update your email.");throw e}},b=async()=>{if(o.j2)try{await (0,s.CI)(o.j2),m.push("/login")}catch(e){console.error("Error signing out",e)}},w=async()=>{let e=null===o.j2||void 0===o.j2?void 0:o.j2.currentUser;if(!o.j2||!e||!o.OO)throw Error("Firebase not configured or user not logged in.");try{let a=(0,n.KR)(o.OO,"users/".concat(e.uid));await (0,n.TF)(a),await (0,s.hG)(e),u(null),m.push("/")}catch(e){if(console.error("Error deleting account:",e),"auth/requires-recent-login"===e.code)throw Error("This action is sensitive and requires recent authentication. Please log out and log back in before deleting your account.");throw Error("An unexpected error occurred while deleting your account.")}};return(0,t.jsx)(c.Provider,{value:{user:r,loading:h,loginWithEmail:f,signupWithEmail:y,logout:b,updateUserProfile:g,deleteAccount:w},children:a})},h=()=>{let e=(0,i.useContext)(c);if(void 0===e)throw Error("useAuth must be used within an AuthProvider");return e}}},e=>{e.O(0,[507,644,889,441,964,358],()=>e(e.s=9439)),_N_E=e.O()}]);