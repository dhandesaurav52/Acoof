(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[833],{2066:(e,r,t)=>{Promise.resolve().then(t.bind(t,43232))},43232:(e,r,t)=>{"use strict";t.r(r),t.d(r,{default:()=>I});var a=t(95155),s=t(12115),l=t(98030),i=t(66695),o=t(50172),n=t(11133),c=t(88390),d=t(6160),u=t(50286),h=t(87374),m=t(80659),f=t(66655),p=t(81115),g=t(93774),x=t(94754),y=t(96025),v=t(16238),j=t(94517),b=t(17398),w=t(83540),N=t(24026),k=t(59434);let O={light:"",dark:".dark"},S=s.createContext(null);function E(){let e=s.useContext(S);if(!e)throw Error("useChart must be used within a <ChartContainer />");return e}let C=s.forwardRef((e,r)=>{let{id:t,className:l,children:i,config:o,...n}=e,c=s.useId(),d="chart-".concat(t||c.replace(/:/g,""));return(0,a.jsx)(S.Provider,{value:{config:o},children:(0,a.jsxs)("div",{"data-chart":d,ref:r,className:(0,k.cn)("flex aspect-video justify-center text-xs [&_.recharts-cartesian-axis-tick_text]:fill-muted-foreground [&_.recharts-cartesian-grid_line[stroke='#ccc']]:stroke-border/50 [&_.recharts-curve.recharts-tooltip-cursor]:stroke-border [&_.recharts-dot[stroke='#fff']]:stroke-transparent [&_.recharts-layer]:outline-none [&_.recharts-polar-grid_[stroke='#ccc']]:stroke-border [&_.recharts-radial-bar-background-sector]:fill-muted [&_.recharts-rectangle.recharts-tooltip-cursor]:fill-muted [&_.recharts-reference-line_[stroke='#ccc']]:stroke-border [&_.recharts-sector[stroke='#fff']]:stroke-transparent [&_.recharts-sector]:outline-none [&_.recharts-surface]:outline-none",l),...n,children:[(0,a.jsx)(R,{id:d,config:o}),(0,a.jsx)(w.u,{children:i})]})})});C.displayName="Chart";let R=e=>{let{id:r,config:t}=e,s=Object.entries(t).filter(e=>{let[,r]=e;return r.theme||r.color});return s.length?(0,a.jsx)("style",{dangerouslySetInnerHTML:{__html:Object.entries(O).map(e=>{let[t,a]=e;return"\n".concat(a," [data-chart=").concat(r,"] {\n").concat(s.map(e=>{var r;let[a,s]=e,l=(null==(r=s.theme)?void 0:r[t])||s.color;return l?"  --color-".concat(a,": ").concat(l,";"):null}).join("\n"),"\n}\n")}).join("\n")}}):null};j.m;let L=s.forwardRef((e,r)=>{let{active:t,payload:l,className:i,indicator:o="dot",hideLabel:n=!1,hideIndicator:c=!1,label:d,labelFormatter:u,labelClassName:h,formatter:m,color:f,nameKey:p,labelKey:g}=e,{config:x}=E(),y=s.useMemo(()=>{var e;if(n||!(null==l?void 0:l.length))return null;let[r]=l,t="".concat(g||r.dataKey||r.name||"value"),s=F(x,r,t),i=g||"string"!=typeof d?null==s?void 0:s.label:(null==(e=x[d])?void 0:e.label)||d;return u?(0,a.jsx)("div",{className:(0,k.cn)("font-medium",h),children:u(i,l)}):i?(0,a.jsx)("div",{className:(0,k.cn)("font-medium",h),children:i}):null},[d,u,l,n,h,x,g]);if(!t||!(null==l?void 0:l.length))return null;let v=1===l.length&&"dot"!==o;return(0,a.jsxs)("div",{ref:r,className:(0,k.cn)("grid min-w-[8rem] items-start gap-1.5 rounded-lg border border-border/50 bg-background px-2.5 py-1.5 text-xs shadow-xl",i),children:[v?null:y,(0,a.jsx)("div",{className:"grid gap-1.5",children:l.map((e,r)=>{let t="".concat(p||e.name||e.dataKey||"value"),s=F(x,e,t),l=f||e.payload.fill||e.color;return(0,a.jsx)("div",{className:(0,k.cn)("flex w-full flex-wrap items-stretch gap-2 [&>svg]:h-2.5 [&>svg]:w-2.5 [&>svg]:text-muted-foreground","dot"===o&&"items-center"),children:m&&(null==e?void 0:e.value)!==void 0&&e.name?m(e.value,e.name,e,r,e.payload):(0,a.jsxs)(a.Fragment,{children:[(null==s?void 0:s.icon)?(0,a.jsx)(s.icon,{}):!c&&(0,a.jsx)("div",{className:(0,k.cn)("shrink-0 rounded-[2px] border-[--color-border] bg-[--color-bg]",{"h-2.5 w-2.5":"dot"===o,"w-1":"line"===o,"w-0 border-[1.5px] border-dashed bg-transparent":"dashed"===o,"my-0.5":v&&"dashed"===o}),style:{"--color-bg":l,"--color-border":l}}),(0,a.jsxs)("div",{className:(0,k.cn)("flex flex-1 justify-between leading-none",v?"items-end":"items-center"),children:[(0,a.jsxs)("div",{className:"grid gap-1.5",children:[v?y:null,(0,a.jsx)("span",{className:"text-muted-foreground",children:(null==s?void 0:s.label)||e.name})]}),e.value&&(0,a.jsx)("span",{className:"font-mono font-medium tabular-nums text-foreground",children:e.value.toLocaleString()})]})]})},e.dataKey)})})]})});function F(e,r,t){if("object"!=typeof r||null===r)return;let a="payload"in r&&"object"==typeof r.payload&&null!==r.payload?r.payload:void 0,s=t;return t in r&&"string"==typeof r[t]?s=r[t]:a&&t in a&&"string"==typeof a[t]&&(s=a[t]),s in e?e[s]:e[t]}L.displayName="ChartTooltip",N.s,s.forwardRef((e,r)=>{let{className:t,hideIcon:s=!1,payload:l,verticalAlign:i="bottom",nameKey:o}=e,{config:n}=E();return(null==l?void 0:l.length)?(0,a.jsx)("div",{ref:r,className:(0,k.cn)("flex items-center justify-center gap-4","top"===i?"pb-3":"pt-3",t),children:l.map(e=>{let r="".concat(o||e.dataKey||"value"),t=F(n,e,r);return(0,a.jsxs)("div",{className:(0,k.cn)("flex items-center gap-1.5 [&>svg]:h-3 [&>svg]:w-3 [&>svg]:text-muted-foreground"),children:[(null==t?void 0:t.icon)&&!s?(0,a.jsx)(t.icon,{}):(0,a.jsx)("div",{className:"h-2 w-2 shrink-0 rounded-[2px]",style:{backgroundColor:e.color}}),null==t?void 0:t.label]},e.value)})}):null}).displayName="ChartLegend";var A=t(56104),_=t(62640);let B="admin@example.com",P={sales:{label:"Sales",color:"hsl(var(--primary))"}},T={sales:{label:"Items Sold",color:"hsl(var(--primary))"}};function Z(){let{user:e,loading:r}=(0,l.A)(),{products:t,loading:w}=(0,_.Q)(),[N,k]=(0,s.useState)(null),[O,S]=(0,s.useState)([]),[E,R]=(0,s.useState)([]),[F,Z]=(0,s.useState)(!0),[I,D]=(0,s.useState)(null);return((0,s.useEffect)(()=>{if(!r&&!w){if(!e||e.email!==B)return void Z(!1);t.length>0?a():w||a()}async function a(){Z(!0),D(null);try{if(!A.OO)throw Error("Firebase is not configured correctly.");let e=(0,p.KR)(A.OO,"users"),r=(0,p.KR)(A.OO,"orders"),[a,s]=await Promise.all([(0,p.Jt)(e),(0,p.Jt)(r)]),l=0;if(a.exists()){let e=a.val();"object"==typeof e&&null!==e&&(l=Object.values(e).filter(e=>e&&e.email!==B).length)}let i=0,o=0;if(s.exists()){let e=s.val();if("object"==typeof e&&null!==e){let r=Object.values(e).filter(e=>(null==e?void 0:e.status)==="Delivered");o=r.length,i=r.reduce((e,r)=>e+((null==r?void 0:r.total)||0),0);let a=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],s=Array.from({length:12},(e,r)=>{let t=new Date;return t.setMonth(t.getMonth()-r),{key:"".concat(t.getFullYear(),"-").concat(t.getMonth()),name:a[t.getMonth()],sales:0}}).reverse();if(r.forEach(e=>{if(e.date)try{let r=new Date(e.date);if(isNaN(r.getTime()))return;let t="".concat(r.getFullYear(),"-").concat(r.getMonth()),a=s.find(e=>e.key===t);a&&a.sales++}catch(r){console.warn("Could not parse date for order ".concat(e.id,": ").concat(e.date))}}),S(s.map(e=>({name:e.name,sales:e.sales}))),t.length>0){let e={};r.forEach(r=>{r.items&&Array.isArray(r.items)&&r.items.forEach(r=>{if(!r.productId)return;let a=t.find(e=>e.id===r.productId);if(a){let t=a.category;e[t]=(e[t]||0)+(r.quantity||1)}})});let a=Object.keys(e).map(r=>({name:r,sales:e[r]})).sort((e,r)=>r.sales-e.sales);R(a)}}}k({totalRevenue:i,salesCount:o,usersCount:l})}catch(r){var e;console.error("Failed to fetch admin data:",r),"PERMISSION_DENIED"===r.code||(null==(e=r.message)?void 0:e.includes("permission_denied"))?D("Permission Denied: Could not fetch dashboard data. This indicates a Firebase security rule issue. Please verify that your Realtime Database rules grant the admin read access to both '/users' and '/orders' paths."):D("An error occurred while processing the dashboard data.")}finally{Z(!1)}}},[e,r,t,w]),r||F||w)?(0,a.jsx)("div",{className:"flex items-center justify-center min-h-[calc(100vh-200px)]",children:(0,a.jsx)(o.A,{className:"h-8 w-8 animate-spin text-primary"})}):(0,a.jsxs)("div",{className:"p-4 sm:p-6 lg:p-8 space-y-8",children:[(0,a.jsxs)("div",{className:"text-left",children:[(0,a.jsx)("h1",{className:"text-3xl sm:text-4xl font-bold tracking-tighter font-headline",children:"Admin Dashboard"}),(0,a.jsx)("p",{className:"text-muted-foreground mt-2",children:"Here's an overview of your store."})]}),I?(0,a.jsxs)(i.Zp,{className:"border-destructive",children:[(0,a.jsx)(i.aR,{children:(0,a.jsxs)(i.ZB,{className:"flex items-center gap-2 text-destructive",children:[(0,a.jsx)(n.A,{className:"h-6 w-6"}),"Dashboard Error"]})}),(0,a.jsx)(i.Wu,{children:(0,a.jsx)("p",{className:"text-destructive",children:I})})]}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-4",children:[(0,a.jsxs)(i.Zp,{children:[(0,a.jsxs)(i.aR,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[(0,a.jsx)(i.ZB,{className:"text-sm font-medium",children:"Total Revenue"}),(0,a.jsx)(c.A,{className:"h-4 w-4 text-muted-foreground"})]}),(0,a.jsx)(i.Wu,{children:(0,a.jsxs)("div",{className:"text-2xl font-bold",children:["â‚¹",(null==N?void 0:N.totalRevenue.toFixed(2))||"0.00"]})})]}),(0,a.jsxs)(i.Zp,{children:[(0,a.jsxs)(i.aR,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[(0,a.jsx)(i.ZB,{className:"text-sm font-medium",children:"Sales"}),(0,a.jsx)(d.A,{className:"h-4 w-4 text-muted-foreground"})]}),(0,a.jsx)(i.Wu,{children:(0,a.jsxs)("div",{className:"text-2xl font-bold",children:["+",(null==N?void 0:N.salesCount)||0]})})]}),(0,a.jsxs)(i.Zp,{children:[(0,a.jsxs)(i.aR,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[(0,a.jsx)(i.ZB,{className:"text-sm font-medium",children:"Unique Customers"}),(0,a.jsx)(u.A,{className:"h-4 w-4 text-muted-foreground"})]}),(0,a.jsx)(i.Wu,{children:(0,a.jsx)("div",{className:"text-2xl font-bold",children:(null==N?void 0:N.usersCount)||0})})]}),(0,a.jsxs)(i.Zp,{children:[(0,a.jsxs)(i.aR,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[(0,a.jsx)(i.ZB,{className:"text-sm font-medium",children:"Total Products"}),(0,a.jsx)(h.A,{className:"h-4 w-4 text-muted-foreground"})]}),(0,a.jsx)(i.Wu,{children:(0,a.jsx)("div",{className:"text-2xl font-bold",children:t.length})})]})]}),(0,a.jsxs)("div",{className:"grid gap-8 md:grid-cols-2",children:[(0,a.jsxs)(i.Zp,{children:[(0,a.jsxs)(i.aR,{children:[(0,a.jsxs)(i.ZB,{className:"flex items-center gap-2",children:[(0,a.jsx)(m.A,{className:"h-6 w-6"}),"Sales Overview"]}),(0,a.jsx)(i.BT,{children:"Number of sales for the last 12 months."})]}),(0,a.jsx)(i.Wu,{children:O.some(e=>e.sales>0)?(0,a.jsx)(C,{config:P,className:"h-[300px] w-full",children:(0,a.jsxs)(g.E,{data:O,margin:{left:-20,top:5},children:[(0,a.jsx)(x.d,{vertical:!1}),(0,a.jsx)(y.W,{dataKey:"name",tickLine:!1,tickMargin:10,axisLine:!1,stroke:"hsl(var(--muted-foreground))",fontSize:12}),(0,a.jsx)(v.h,{stroke:"hsl(var(--muted-foreground))",fontSize:12,tickLine:!1,axisLine:!1,allowDecimals:!1}),(0,a.jsx)(j.m,{cursor:!1,content:(0,a.jsx)(L,{indicator:"dot"})}),(0,a.jsx)(b.y,{dataKey:"sales",fill:"hsl(var(--primary))",radius:4})]})}):(0,a.jsx)("div",{className:"flex items-center justify-center h-[300px] text-muted-foreground",children:"No sales data available for the last 12 months."})})]}),(0,a.jsxs)(i.Zp,{children:[(0,a.jsxs)(i.aR,{children:[(0,a.jsxs)(i.ZB,{className:"flex items-center gap-2",children:[(0,a.jsx)(f.A,{className:"h-6 w-6"}),"Top Selling Categories"]}),(0,a.jsx)(i.BT,{children:"Total items sold per category."})]}),(0,a.jsx)(i.Wu,{children:E.length>0?(0,a.jsx)(C,{config:T,className:"h-[300px] w-full",children:(0,a.jsxs)(g.E,{data:E,layout:"vertical",margin:{left:10,right:20},children:[(0,a.jsx)(x.d,{horizontal:!1}),(0,a.jsx)(v.h,{dataKey:"name",type:"category",tickLine:!1,tickMargin:10,axisLine:!1,stroke:"hsl(var(--muted-foreground))",fontSize:12,width:80,interval:0}),(0,a.jsx)(y.W,{dataKey:"sales",type:"number",stroke:"hsl(var(--muted-foreground))",fontSize:12,tickLine:!1,axisLine:!1,allowDecimals:!1}),(0,a.jsx)(j.m,{cursor:{fill:"hsl(var(--muted))"},content:(0,a.jsx)(L,{indicator:"dot"})}),(0,a.jsx)(b.y,{dataKey:"sales",layout:"vertical",fill:"hsl(var(--primary))",radius:4})]})}):(0,a.jsx)("div",{className:"flex items-center justify-center h-[300px] text-muted-foreground",children:"No category sales data available."})})]})]})]})]})}function I(){return(0,a.jsx)(Z,{})}},56104:(e,r,t)=>{"use strict";let a;t.d(r,{IG:()=>m,OO:()=>f,j2:()=>h});var s=t(23915),l=t(93004),i=t(90858),o=t(81115),n=t(49509);let c={apiKey:"AIzaSyCTdO0dfAN6jOW1tj-AQM4vSP7o6LVkdUg",authDomain:"acoof-8e92d.firebaseapp.com",projectId:"acoof-8e92d",storageBucket:"acoof-8e92d.firebasestorage.app",messagingSenderId:"791754268594",appId:"1:791754268594:web:51afb7e216efd2c44b8eab",databaseURL:"https://acoof-8e92d-default-rtdb.firebaseio.com"},d=n.env.FIREBASE_CONFIG?JSON.parse(n.env.FIREBASE_CONFIG):null;a=c.apiKey?c:d;let u=null,h=null,m=null,f=null;if(a&&a.apiKey)try{u=(0,s.Dk)().length?(0,s.Sx)():(0,s.Wp)(a),h=(0,l.xI)(u),m=(0,i.c7)(u),f=(0,o.C3)(u)}catch(e){console.error("Failed to initialize Firebase client SDK.",e)}else console.warn("Firebase configuration is missing or incomplete. Firebase client-side features will be disabled. If you are running locally, please create a .env.local file with your Firebase project's NEXT_PUBLIC_ credentials.")},59434:(e,r,t)=>{"use strict";t.d(r,{cn:()=>l});var a=t(52596),s=t(39688);function l(){for(var e=arguments.length,r=Array(e),t=0;t<e;t++)r[t]=arguments[t];return(0,s.QP)((0,a.$)(r))}},62640:(e,r,t)=>{"use strict";t.d(r,{ProductsProvider:()=>d,Q:()=>u});var a=t(95155),s=t(12115),l=t(56104),i=t(81115),o=t(90858),n=t(93473);let c=(0,s.createContext)(void 0),d=e=>{let{children:r}=e,[t,d]=(0,s.useState)([]),[u,h]=(0,s.useState)(!0);(0,s.useEffect)(()=>{if(!l.OO){console.warn("Firebase not configured, using local fallback products."),d(n.ZE),h(!1);return}h(!0);let e=(0,i.KR)(l.OO,"products"),r=(0,i.Zy)(e,e=>{try{if(e.exists()){let r=e.val();if(r&&Object.keys(r).length>0){let e=Object.keys(r).map(e=>{var t;let a=r[e];return a&&"string"==typeof a.name&&"number"==typeof a.price&&Array.isArray(a.images)?{id:e,name:a.name,description:a.description||"",price:a.price,category:a.category||"Tshirts",images:a.images.length>0?a.images:["https://placehold.co/600x800.png"],isNew:null!=(t=a.isNew)&&t,colors:a.colors||[],sizes:a.sizes||[]}:(console.warn("Skipping malformed product with key: ".concat(e),a),null)}).filter(e=>null!==e).reverse();d(e)}else console.log("Firebase 'products' node is empty, loading local fallback data."),d(n.ZE)}else console.log("No products found in Firebase, loading local fallback data."),d(n.ZE)}catch(e){console.error("Error processing products snapshot, using local fallback. Error:",e),d(n.ZE)}finally{h(!1)}},e=>{console.error("Firebase read failed with onValue, using local fallback. Error:",e),d(n.ZE),h(!1)});return()=>{r()}},[]);let m=(0,s.useCallback)(async e=>{if(!l.OO||!l.IG)throw Error("Firebase not configured.");if(t===n.ZE)return void console.warn("Cannot remove product, running on local data.");let r=(0,i.KR)(l.OO,"products/".concat(e.id));await (0,i.TF)(r);let a=e.images.filter(e=>e.includes("firebasestorage.googleapis.com")).map(e=>{try{let r=(0,o.KR)(l.IG,e);return(0,o.XR)(r)}catch(r){return console.error("Error creating ref for image ".concat(e,". It might not be a valid storage URL."),r),Promise.resolve()}});await Promise.all(a)},[t]),f=(0,s.useCallback)(async(e,r)=>{if(!l.OO)throw Error("Firebase not configured.");if(t===n.ZE)return void console.warn("Cannot update product, running on local data.");let a=(0,i.KR)(l.OO,"products/".concat(e));await (0,i.yo)(a,r)},[t]);return(0,a.jsx)(c.Provider,{value:{products:t,loading:u,removeProduct:m,updateProduct:f},children:r})},u=()=>{let e=(0,s.useContext)(c);if(void 0===e)throw Error("useProducts must be used within a ProductsProvider");return e}},66695:(e,r,t)=>{"use strict";t.d(r,{BT:()=>c,Wu:()=>d,ZB:()=>n,Zp:()=>i,aR:()=>o,wL:()=>u});var a=t(95155),s=t(12115),l=t(59434);let i=s.forwardRef((e,r)=>{let{className:t,...s}=e;return(0,a.jsx)("div",{ref:r,className:(0,l.cn)("rounded-lg border bg-card text-card-foreground shadow-sm",t),...s})});i.displayName="Card";let o=s.forwardRef((e,r)=>{let{className:t,...s}=e;return(0,a.jsx)("div",{ref:r,className:(0,l.cn)("flex flex-col space-y-1.5 p-6",t),...s})});o.displayName="CardHeader";let n=s.forwardRef((e,r)=>{let{className:t,...s}=e;return(0,a.jsx)("div",{ref:r,className:(0,l.cn)("text-2xl font-semibold leading-none tracking-tight",t),...s})});n.displayName="CardTitle";let c=s.forwardRef((e,r)=>{let{className:t,...s}=e;return(0,a.jsx)("div",{ref:r,className:(0,l.cn)("text-sm text-muted-foreground",t),...s})});c.displayName="CardDescription";let d=s.forwardRef((e,r)=>{let{className:t,...s}=e;return(0,a.jsx)("div",{ref:r,className:(0,l.cn)("p-6 pt-0",t),...s})});d.displayName="CardContent";let u=s.forwardRef((e,r)=>{let{className:t,...s}=e;return(0,a.jsx)("div",{ref:r,className:(0,l.cn)("flex items-center p-6 pt-0",t),...s})});u.displayName="CardFooter"},93473:(e,r,t)=>{"use strict";t.d(r,{BX:()=>l,LZ:()=>s,ZE:()=>a,ap:()=>i});let a=[{id:"1",name:"Classic White Tee",description:"A timeless staple for any wardrobe, made from 100% premium cotton.",price:25,category:"Tshirts",images:["https://placehold.co/600x800.png"],isNew:!0,colors:["White","Black","Gray"],sizes:["S","M","L","XL","XXL"]},{id:"2",name:"Slim-Fit Denim Jeans",description:"Modern slim-fit jeans in a versatile dark wash.",price:75,category:"Jeans",images:["https://placehold.co/600x800.png"],isNew:!0,colors:["Dark Wash","Light Wash","Black"],sizes:["30","32","34","36"]},{id:"3",name:"Leather Derby Shoes",description:"Classic derby shoes crafted from genuine leather, perfect for any occasion.",price:120,category:"Shoes",images:["https://placehold.co/600x800.png"],isNew:!0,colors:["Black","Brown"],sizes:["9","10","11","12"]},{id:"4",name:"Urban Graphic Hoodie",description:"Comfortable cotton hoodie with a bold back print.",price:65,category:"Shirts",images:["https://placehold.co/600x800.png"],isNew:!1,colors:["Black","Heather Gray","Navy"],sizes:["S","M","L","XL","XXL"]},{id:"5",name:"Cargo Trousers",description:"Utilitarian cargo pants with multiple pockets for functionality.",price:80,category:"Trousers",images:["https://placehold.co/600x800.png"],isNew:!1,colors:["Khaki","Olive","Black"],sizes:["S","M","L","XL","XXL"]},{id:"6",name:"Minimalist Sneakers",description:"Clean and simple sneakers that pair with everything.",price:90,category:"Shoes",images:["https://placehold.co/600x800.png"],isNew:!1,colors:["White","Black","Cream"],sizes:["8","9","10","11","12","13"]},{id:"7",name:"Linen Button-Up Shirt",description:"A breezy linen shirt, ideal for warmer weather.",price:55,category:"Shirts",images:["https://placehold.co/600x800.png"],isNew:!1,colors:["Beige","White","Light Blue"],sizes:["S","M","L","XL","XXL"]},{id:"8",name:"Canvas Tote Bag",description:"A durable and stylish canvas tote for your daily essentials.",price:40,category:"Bags",images:["https://placehold.co/600x600.png"],isNew:!0,colors:["Natural","Black"],sizes:["One Size"]}],s=["Shirts","Tshirts","Oversized T-shirt","Pants","Jeans","Trousers","Shoes","Bags","Belts","Socks","Wallets","Sweater","Sweatshirt","Jackets","Track pants"],l=["S","M","L","XL","XXL"],i=["28","30","32","34","36"]},98030:(e,r,t)=>{"use strict";t.d(r,{A:()=>h,AuthProvider:()=>u});var a=t(95155),s=t(12115),l=t(93004),i=t(56104),o=t(35695),n=t(81115);let c=(0,s.createContext)(void 0),d=Error("Firebase is not configured. Please add your Firebase credentials to the .env file."),u=e=>{let{children:r}=e,[t,u]=(0,s.useState)(null),[h,m]=(0,s.useState)(!0),f=(0,o.useRouter)();(0,s.useEffect)(()=>{if(!i.j2)return void m(!1);let e=(0,l.hg)(i.j2,async e=>{if(e){if(!i.OO){u(e),m(!1);return}let r=(0,n.KR)(i.OO,"users/".concat(e.uid));try{let t=await (0,n.Jt)(r);if(t.exists()){let r=t.val();Object.assign(e,r)}else{let t={email:e.email,displayName:e.displayName};await (0,n.hZ)(r,t),Object.assign(e,t)}u(e)}catch(r){u(e)}}else u(null);m(!1)});return()=>e()},[]);let p=async(e,r)=>{if(!i.j2)throw d;return(0,l.x9)(i.j2,e,r)},g=async(e,r,t,a)=>{if(!i.j2||!i.OO)throw d;try{let s=await (0,l.eJ)(i.j2,e,r);if(s.user)try{let e="".concat(t," ").concat(a);await (0,l.r7)(s.user,{displayName:e});let r=(0,n.KR)(i.OO,"users/".concat(s.user.uid));await (0,n.hZ)(r,{email:s.user.email,displayName:e})}catch(e){console.error("Database error during sign up:",e)}return s}catch(e){throw e}},x=async e=>{let r=null===i.j2||void 0===i.j2?void 0:i.j2.currentUser;if(!i.j2||!r||!i.OO)throw Error("Firebase not configured or user not logged in.");try{let t=[];e.displayName&&e.displayName!==r.displayName&&t.push((0,l.r7)(r,{displayName:e.displayName})),e.email&&e.email!==r.email&&t.push((0,l.Ww)(r,e.email)),t.length>0&&await Promise.all(t);let a=(0,n.KR)(i.OO,"users/".concat(r.uid)),s={};e.displayName&&(s.displayName=e.displayName),e.email&&(s.email=e.email),void 0!==e.phone&&(s.phone=e.phone),void 0!==e.address&&(s.address=e.address),void 0!==e.city&&(s.city=e.city),void 0!==e.state&&(s.state=e.state),void 0!==e.pincode&&(s.pincode=e.pincode),Object.keys(s).length>0&&await (0,n.yo)(a,s),await r.reload();let o=i.j2.currentUser;if(o){let e=await (0,n.Jt)(a),r=e.exists()?e.val():{};Object.assign(o,r),u(o)}else u(null)}catch(e){var t;if("PERMISSION_DENIED"===e.code||(null==(t=e.message)?void 0:t.includes("permission_denied")))throw Error("Permission Denied: Please check your Firebase Realtime Database security rules to allow users to read/write their own profile data.");if("auth/requires-recent-login"===e.code)throw Error("This action is sensitive and requires recent authentication. Please log out and log back in to update your email.");throw e}},y=async()=>{if(i.j2)try{await (0,l.CI)(i.j2),f.push("/login")}catch(e){console.error("Error signing out",e)}},v=async()=>{let e=null===i.j2||void 0===i.j2?void 0:i.j2.currentUser;if(!i.j2||!e||!i.OO)throw Error("Firebase not configured or user not logged in.");try{let r=(0,n.KR)(i.OO,"users/".concat(e.uid));await (0,n.TF)(r),await (0,l.hG)(e),u(null),f.push("/")}catch(e){if(console.error("Error deleting account:",e),"auth/requires-recent-login"===e.code)throw Error("This action is sensitive and requires recent authentication. Please log out and log back in before deleting your account.");throw Error("An unexpected error occurred while deleting your account.")}};return(0,a.jsx)(c.Provider,{value:{user:t,loading:h,loginWithEmail:p,signupWithEmail:g,logout:y,updateUserProfile:x,deleteAccount:v},children:r})},h=()=>{let e=(0,s.useContext)(c);if(void 0===e)throw Error("useAuth must be used within an AuthProvider");return e}}},e=>{e.O(0,[507,644,889,277,965,441,964,358],()=>e(e.s=2066)),_N_E=e.O()}]);