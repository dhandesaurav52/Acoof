exports.id=811,exports.ids=[811],exports.modules={8173:(a,b,c)=>{"use strict";c.r(b),c.d(b,{"00f88b3e2a1307df50672fc9b2255cea5fda1dfdd1":()=>s,"40af7c7ff0fbd35701fe6acec88c51aaef1ed2e3f8":()=>n,"6073576538077b9a5b4ce210a1685eafb441e7ccdb":()=>r,"70a64c0a7351ee07c21d7d4f2c06cea6720abf5ac4":()=>q,"70e640e3504e86d7e2c9ae8ed1ac5e4972be531e55":()=>m});var d=c(91199);c(42087);var e=c(40934),f=c.n(e),g=c(55511),h=c(46675);let i=null;function j(){if(i)return{app:i,database:h.database(),auth:h.auth(),storage:h.storage()};let a="https://acoof-8e92d-default-rtdb.firebaseio.com",b=process.env.FIREBASE_SERVICE_ACCOUNT_KEY;if(a&&b)try{let c=JSON.parse(b);return{app:i=h.initializeApp({credential:h.credential.cert(c),databaseURL:a}),database:h.database(),auth:h.auth(),storage:h.storage()}}catch(a){if(/already exists/u.test(a.message)||console.error("Firebase Admin SDK initialization error:",a),h.apps.length)return{app:i=h.app(),database:h.database(),auth:h.auth(),storage:h.storage()}}return{app:null,database:null,auth:null,storage:null}}let k=[{id:"1",name:"Classic White Tee",description:"A timeless staple for any wardrobe, made from 100% premium cotton.",price:25,category:"Tshirts",images:["https://placehold.co/600x800.png"],isNew:!0,colors:["White","Black","Gray"],sizes:["S","M","L","XL","XXL"]},{id:"2",name:"Slim-Fit Denim Jeans",description:"Modern slim-fit jeans in a versatile dark wash.",price:75,category:"Jeans",images:["https://placehold.co/600x800.png"],isNew:!0,colors:["Dark Wash","Light Wash","Black"],sizes:["30","32","34","36"]},{id:"3",name:"Leather Derby Shoes",description:"Classic derby shoes crafted from genuine leather, perfect for any occasion.",price:120,category:"Shoes",images:["https://placehold.co/600x800.png"],isNew:!0,colors:["Black","Brown"],sizes:["9","10","11","12"]},{id:"4",name:"Urban Graphic Hoodie",description:"Comfortable cotton hoodie with a bold back print.",price:65,category:"Shirts",images:["https://placehold.co/600x800.png"],isNew:!1,colors:["Black","Heather Gray","Navy"],sizes:["S","M","L","XL","XXL"]},{id:"5",name:"Cargo Trousers",description:"Utilitarian cargo pants with multiple pockets for functionality.",price:80,category:"Trousers",images:["https://placehold.co/600x800.png"],isNew:!1,colors:["Khaki","Olive","Black"],sizes:["S","M","L","XL","XXL"]},{id:"6",name:"Minimalist Sneakers",description:"Clean and simple sneakers that pair with everything.",price:90,category:"Shoes",images:["https://placehold.co/600x800.png"],isNew:!1,colors:["White","Black","Cream"],sizes:["8","9","10","11","12","13"]},{id:"7",name:"Linen Button-Up Shirt",description:"A breezy linen shirt, ideal for warmer weather.",price:55,category:"Shirts",images:["https://placehold.co/600x800.png"],isNew:!1,colors:["Beige","White","Light Blue"],sizes:["S","M","L","XL","XXL"]},{id:"8",name:"Canvas Tote Bag",description:"A durable and stylish canvas tote for your daily essentials.",price:40,category:"Bags",images:["https://placehold.co/600x600.png"],isNew:!0,colors:["Natural","Black"],sizes:["One Size"]}];async function l(a){let{auth:b}=j();if(!b)throw Error("The authentication service is not configured on the server. This is not a user session issue. Please check server logs.");if(!a)throw Error("Authentication token is required.");try{return(await b.verifyIdToken(a)).uid}catch(a){throw console.error("Error verifying ID token:",a),Error("Your session is invalid or has expired. Please log in again.")}}async function m(a,b,c){try{await l(b)}catch(a){return{error:a.message}}let d="rzp_live_XR2ZuStUe6ydxT",e=process.env.RAZORPAY_KEY_SECRET;if(!d||!e)return{error:"Payment gateway is not configured on the server. One or more Razorpay API keys are missing from the .env file. Please check that `NEXT_PUBLIC_RAZORPAY_KEY_ID` and `RAZORPAY_KEY_SECRET` are both set."};let h=Math.round(100*a);if(h<100)return{error:"The total amount must be at least ₹1.00 to proceed with payment."};try{let a=new(f())({key_id:d.trim(),key_secret:e.trim()}),b=c||`receipt_${(0,g.randomBytes)(6).toString("hex")}`,i=await a.orders.create({amount:h,currency:"INR",receipt:b});if(!i||!i.id||"number"!=typeof i.amount)throw Error("Razorpay response was incomplete.");return{id:i.id,amount:i.amount,currency:i.currency}}catch(b){if(console.error("\n\n--- RAZORPAY ORDER CREATION FAILED ---"),console.error("Full Error Object:",JSON.stringify(b,null,2)),console.error("--- END OF RAZORPAY ERROR ---\n\n"),401===b.statusCode)return{error:"Authentication with Razorpay failed (Error 401). This is the most common payment error. It means your API Keys are incorrect. Please double-check the following: 1) Are there any typos or extra spaces in your keys in the .env file? 2) Are you using your 'Test Mode' keys in your code while your Razorpay account is in 'Live Mode' (or vice-versa)? The modes must match."};let a=b.error?.description||"An unknown error occurred.";return{error:`Failed to create payment order. Gateway response: ${a}`}}}async function n(a){let b=process.env.RAZORPAY_KEY_SECRET;if(!b)return console.error("Razorpay secret key not found in .env file"),{success:!1,error:"Payment verification is not configured on the server. The secret key is missing."};let{orderId:c,paymentId:d,signature:e}=a;return(0,g.createHmac)("sha256",b.trim()).update((c+"|"+d).toString()).digest("hex")===e?{success:!0}:{success:!1,error:"Payment verification failed. This means the response from Razorpay could not be trusted. This is often caused by an incorrect 'RAZORPAY_KEY_SECRET'. Please re-verify your secret key for any typos or extra spaces and ensure it matches your account's mode (Test vs. Live)."}}async function o(a){let{database:b}=j();if(b&&a.userEmail)try{let c=b.ref("notifications").push(),d=c.key;if(d){let b=`New order #${a.id.slice(-6).toUpperCase()} placed by ${a.userEmail}. Total: ₹${a.total.toFixed(2)}`,e={id:d,for_admin:!0,type:"new_order",message:b,timestamp:new Date().toISOString(),read:!1,orderId:a.id,userId:a.userId,userEmail:a.userEmail};await c.set(e)}}catch(a){console.error("Failed to create admin notification:",a)}}async function p(a,b){let{database:c}=j();if(c&&a.userEmail&&a.userId)try{let d=c.ref(`user-notifications/${a.userId}`).push(),e=d.key;if(e){let c=a.id.slice(-6).toUpperCase(),f="",g="new_order";if("Shipped"===b)f=`Your order #${c} has been accepted and is now being processed.`,g="order_accepted";else{if("Cancelled"!==b)return;f=`Your order #${c} has been rejected by the seller.`,g="order_rejected"}let h={id:e,type:g,message:f,timestamp:new Date().toISOString(),read:!1,orderId:a.id,userId:a.userId,userEmail:a.userEmail};await d.set(h)}}catch(b){console.error(`Failed to create user notification for order ${a.id}:`,b)}}async function q(a,b,c){let{auth:d,database:e}=j();try{let a=await l(c),b=await d.getUser(a);if("admin@example.com"!==b.email)return{success:!1,error:"Unauthorized: Only admins can perform this action."}}catch(a){return{success:!1,error:a.message}}if(!e)return{success:!1,error:"Database not configured"};let f=e.ref(`orders/${a.id}`);try{return await f.update({status:b}),await p(a,b),{success:!0}}catch(a){return console.error("Failed to update order status:",a),{success:!1,error:"Could not update order status in the database."}}}async function r(a,b){let c,{database:d}=j();try{c=await l(b)}catch(a){return{success:!1,error:a.message}}if(!d)return{success:!1,error:"Firebase is not configured. Cannot save order."};if(a.userId!==c)return{success:!1,error:"User ID does not match authenticated user. Cannot save order."};let e=d.ref("orders").push().key;if(!e)return{success:!1,error:"Failed to generate a unique order ID from Firebase."};let f={...a,id:e,status:"Pending"};try{let b={};return b[`/orders/${e}`]=f,b[`/users/${a.userId}/orders/${e}`]=!0,await d.ref().update(b),await o(f),{success:!0,orderId:e}}catch(a){if(console.error("Firebase saveOrder error:",a),"PERMISSION_DENIED"===a.code||a.message?.includes("permission_denied"))return{success:!1,error:"Permission Denied: Could not save the order. Please check your Firebase security rules."};return{success:!1,error:"An unexpected error occurred while saving the order. Check server logs."}}}async function s(){let{database:a}=j();if(!a)return{success:!1,error:"Firebase is not configured. Cannot seed products."};let b=a.ref("products");try{let a=k.reduce((a,b)=>{let{id:c,...d}=b;return a[c]=d,a},{});return await b.set(a),{success:!0,count:k.length}}catch(a){return console.error("Firebase seedProducts error:",a),{success:!1,error:"An unexpected error occurred while seeding the products."}}}(0,c(33331).D)([m,n,q,r,s]),(0,d.A)(m,"70e640e3504e86d7e2c9ae8ed1ac5e4972be531e55",null),(0,d.A)(n,"40af7c7ff0fbd35701fe6acec88c51aaef1ed2e3f8",null),(0,d.A)(q,"70a64c0a7351ee07c21d7d4f2c06cea6720abf5ac4",null),(0,d.A)(r,"6073576538077b9a5b4ce210a1685eafb441e7ccdb",null),(0,d.A)(s,"00f88b3e2a1307df50672fc9b2255cea5fda1dfdd1",null)},44493:(a,b,c)=>{"use strict";c.d(b,{BT:()=>j,Wu:()=>k,ZB:()=>i,Zp:()=>g,aR:()=>h,wL:()=>l});var d=c(60687),e=c(43210),f=c(4780);let g=e.forwardRef(({className:a,...b},c)=>(0,d.jsx)("div",{ref:c,className:(0,f.cn)("rounded-lg border bg-card text-card-foreground shadow-sm",a),...b}));g.displayName="Card";let h=e.forwardRef(({className:a,...b},c)=>(0,d.jsx)("div",{ref:c,className:(0,f.cn)("flex flex-col space-y-1.5 p-6",a),...b}));h.displayName="CardHeader";let i=e.forwardRef(({className:a,...b},c)=>(0,d.jsx)("div",{ref:c,className:(0,f.cn)("text-2xl font-semibold leading-none tracking-tight",a),...b}));i.displayName="CardTitle";let j=e.forwardRef(({className:a,...b},c)=>(0,d.jsx)("div",{ref:c,className:(0,f.cn)("text-sm text-muted-foreground",a),...b}));j.displayName="CardDescription";let k=e.forwardRef(({className:a,...b},c)=>(0,d.jsx)("div",{ref:c,className:(0,f.cn)("p-6 pt-0",a),...b}));k.displayName="CardContent";let l=e.forwardRef(({className:a,...b},c)=>(0,d.jsx)("div",{ref:c,className:(0,f.cn)("flex items-center p-6 pt-0",a),...b}));l.displayName="CardFooter"},54647:()=>{}};